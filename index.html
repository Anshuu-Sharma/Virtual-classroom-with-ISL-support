<!DOCTYPE html>

<html>
<head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Divanshu Singh - Thapar University" >
    <link rel="icon" href="images/favicon.png">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="js/ie-emulation-modes-warning.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link href="https://fonts.googleapis.com/css?family=Baloo" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <title>ISL : Avatar Page</title>
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta http-equiv="Access-Control-Allow-Methods" content="GET">
    <link rel="stylesheet" href="css/cwasa.css" />
    <script type="text/javascript" src="js/allcsa.js"></script>
    <script language="javascript">
        // Initial configuration
        var initCfg = {
            "avsbsl" : ["luna", "siggi", "anna", "marc", "francoise"],
            "avSettings" : { "avList": "avsbsl", "initAv": "marc" },
            "jasBase" : "http://127.0.0.1:5001/",
            "avJARBase" : "avatars",
            "animgenServer": "http://127.0.0.1:5001/animgen"
        };

        // global variable to store the sigmal list
        var sigmlList = null;

        // global variable to tell if avatar is ready or not
        var tuavatarLoaded = false;
    </script>

    <script type="text/javascript">
        function submit()
        {
            document.getElementById("startrunning").click(); // Simulates button click
            document.submitForm.submit(); // Submits the form without the button
        }
    </script>

    <script src="https://www.google.com/jsapi" type="text/javascript"></script>
    

    <script language="javascript" src="js/animationPlayer.js"></script>
</head>
<body onload="CWASA.init(initCfg);" >
   

    <div class="outer-container" style="position: relative; height: 100%; width: 100%;">
        <div id="loading" class="container">
            <div class="row text-center"><span style="background-color:#ebf8a4; padding: 8px 20px;">Loading ... Please wait...</span></div>
        </div>

        <div class="main-layout">
            <form id="inputText">
                <input id="dom-target" type="text" name="firstname" hidden><br>
            </form>

            <section class="avatar-splash">
                <div class="avatar-overlay" aria-live="polite">
                    <div id="status_loader" class="loader-panel">
                        <img id="status_loader_image" src="images/speechloader.gif" alt="Listening animation">
                        <p id="status_loader_text" class="text-center loader-text">Listening...</p>
                    </div>
                </div>
                <div class="avatar-surface">
                    <div class="avatar-frame">
                        <div class="CWASAAvatar av0" align="center"></div>
                        
                    </div>
                    <div class="avatar-words-card">
                        <div class="avatar-words-header">
                            <div>
                                <h3>Words Timeline</h3>
                                <p class="avatar-words-subtitle">Track the avatarâ€™s signing sequence in real time.</p>
                            </div>
                            <span class="avatar-words-tag">WORDS</span>
                        </div>
                        <div id="words_transcript" class="words-log"></div>
                    </div>
                    <div class="avatar-controls" style="display:none;">
                        <span class="CWASAAvMenu av0" ></span>
                        <input type="button" value="Sign" class="bttnPlaySiGMLURL av0" />
                        <input type="button" value="Stop" class="bttnStop av0" />
                        <span class="CWASASpeed av0" ></span>
                        <br/>
                        <span class="avatar-meta">
                                    Sign/Frame:
                                    <input class="txtSF av0" value="0/0" type="text">
                                    Gloss:
                                    <input class="txtGloss av0" value="[none]" type="text">
                                </span>
                        <!--  CachedSiGML URL  -->
                        <input type="text" id="URLText" class="txtSiGMLURL av0 undisplayed" value="" />
                        <script language="text/javascript">
                            // Set default sign
                            setSiGMLURL("SignFiles/hello.sigml");
                        </script>
                    </div>
                </div>
            </section>

            <aside class="sidebar">
                <div class="sidebar-inner">
                    <div class="listening-toolbar">
                        <div id="listening_controls" class="listening-controls">
                            <a id="start_listening" onclick="startContinuousListening()" class="btn-floating btn-large waves-effect green">
                                <i class="large material-icons">play_arrow</i>
                            </a>
                            <a id="stop_listening" onclick="stopContinuousListening()" class="btn-floating btn-large waves-effect red" style="display:none;">
                                <i class="large material-icons">stop</i>
                            </a>
                            <div class="listening-copy">
                                <p id="listening_status" class="listening-status">Idle</p>
                                <p class="listening-subtitle">Whisper ASR (with fallback)</p>
                            </div>
                        </div>
                    </div>
                    <header class="transcript-header">
                        <div class="transcript-header-text">
                            <h2>Session Transcript</h2>
                            <p>Track spoken input and rendered ISL output in real time.</p>
                        </div>
                        <span class="status-pill status-idle" id="transcript_status">Idle</span>
                    </header>

                    <div class="transcript-panel live-panel">
                        <div class="panel-heading">
                            <h5>Live Transcript</h5>
                            <span class="panel-tag">voice</span>
                        </div>
                        <p class="panel-subtitle">Continuous speech recognition streamed from the microphone.</p>
                        <div id="live_transcript" class="transcript-log"></div>
                    </div>
                    <div class="transcript-panel isl-panel">
                        <div class="panel-heading">
                            <h5>ISL Output</h5>
                            <span class="panel-tag">ISL</span>
                        </div>
                        <p class="panel-subtitle">Auto-translated Indian Sign Language gloss sequence queued for playback.</p>
                        <div id="isl_transcript" class="transcript-log"></div>
                    </div>
                    <div class="transcript-panel queue-panel">
                        <div class="panel-heading">
                            <h5>Playback Queue</h5>
                            <span class="panel-tag">queue</span>
                        </div>
                        <p class="panel-subtitle">Upcoming avatar motions and their processing status.</p>
                        <div id="isl_queue" class="transcript-log"></div>
                    </div>
                </div>
            </aside>
        </div>

        <script type="text/javascript" src="js/player.js"></script>

        <script type="text/javascript" src="js/sigmlFiles.json"></script>>
        <script type="text/javascript" src="js/handler.js"></script>
    </div>
</body>


</html>
</html>